(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3659:function(e,s,t){Promise.resolve().then(t.bind(t,9124))},9124:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var r,a,n=t(4612),o=t(8153);(r=a||(a={}))[r.IDLE=0]="IDLE",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.ERROR=3]="ERROR";let c=t(4035).Z.create({baseURL:"https://api.github.com",timeout:1e4,headers:{"Content-Type":"application/vnd.github+json"}});c.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),c.interceptors.response.use(e=>e);class i{async retrieveUsers(e){return c.get("/search/users?".concat(null==e?"":new URLSearchParams(e).toString()))}async retrieveUserRepos(e){return c.get("/users/".concat(e,"/repos"))}}class l{async execute(){this.onStart();try{let{data:e}=await this.repository.retrieveUserRepos(this.username);this.onSuccess(e)}catch(e){"function"==typeof this.onError&&this.onError(e)}}constructor({username:e,onStart:s,onSuccess:t,onError:r}){this.repository=new i,this.username=e,this.onStart=s,this.onSuccess=t,this.onError=r}}class u{async execute(){this.onStart();try{let{data:e}=await this.repository.retrieveUsers(this.queryParam);this.onSuccess(e)}catch(e){"function"==typeof this.onError&&this.onError(e)}}constructor({queryParam:e,onStart:s,onSuccess:t,onError:r}){this.repository=new i,this.queryParam=e,this.onStart=s,this.onSuccess=t,this.onError=r}}var d=t(6361);let h=()=>({users:[],totalCount:0,perPage:30,page:1,fetchStatusPage:a.IDLE,fetchStatusButton:a.IDLE,message:""}),p=(0,d.U)()(e=>({...h(),getSearchUsers:s=>{let t=p.getState(),r={q:s,per_page:t.perPage,page:t.page};new u({queryParam:r,onStart:()=>{e(()=>({fetchStatusPage:a.LOADING}))},onSuccess:t=>{e(()=>({search:s,page:null==r?void 0:r.page,users:t.items,totalCount:t.total_count,fetchStatusPage:a.SUCCESS}))},onError:s=>{e(()=>({message:s.message,fetchStatusPage:a.ERROR}))}}).execute()},getUserRepos:(s,t)=>{new l({username:s,onStart:()=>{p.getState().updateUsers(s,{is_collapse:t,repos:[],repos_fetch_status:a.LOADING})},onSuccess:e=>{p.getState().updateUsers(s,{is_collapse:t,repos:e,repos_fetch_status:a.SUCCESS})},onError:s=>{e(()=>({message:s.message,fetchStatusPage:a.ERROR}))}}).execute()},updateUsers:(s,t)=>{let r=p.getState().users;if(r){let a=r.findIndex(e=>e.login===s);if(-1!==a){let s={...r[a],...t};r[a]=s,e(()=>({users:r}))}}}}));var g=t(1910);let m=()=>(0,n.jsx)("div",{className:"loading loading-dots"}),S=()=>{let{search:e,users:s,totalCount:t,getUserRepos:r,updateUsers:a}=p();return(null==s?void 0:s.length)===0?null:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mt-2 mb-2",children:(0,n.jsxs)("label",{children:["Found ".concat(t," results for "),(0,n.jsx)("span",{className:"font-semibold",children:e})]})}),null==s?void 0:s.map((e,s)=>{var t;return(0,n.jsxs)("div",{className:"collapse collapse-arrow bg-base-100 border border-base-300 ".concat(0===s?"mt-0":"mt-2"),children:[(0,n.jsx)("input",{type:"checkbox",checked:null!==(t=e.is_collapse)&&void 0!==t&&t,onChange:s=>{e.login&&function(e,s){if(e.login){var t;void 0===e.repos||(null===(t=e.repos)||void 0===t?void 0:t.length)===0?r(e.login,s):a(e.login,{is_collapse:s})}}(e,s.target.checked)}}),(0,n.jsx)("div",{className:"collapse-title font-semibold",children:e.login}),(0,n.jsx)(f,{user:e})]},e.id)})]})},f=e=>{let{user:s}=e;switch(s.repos_fetch_status){case a.LOADING:return(0,n.jsx)(m,{});case a.SUCCESS:if(s.is_collapse)return(0,n.jsx)("div",{className:"pl-4 pb-4 pr-4",children:s.repos.map((e,s)=>(0,n.jsxs)("div",{className:"bg-base-100 border border-base-300 p-2 rounded-md ".concat(0===s?"mt-0":"mt-2"),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("a",{className:"font-semibold",href:e.html_url,target:"_blank",children:e.name}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{className:"font-semibold",children:e.stargazers_count}),(0,n.jsx)(g.QJe,{})]})]}),(0,n.jsx)("p",{children:e.description})]},e.id))});return null;default:return null}};function x(){let{fetchStatusPage:e}=p(),s=(0,o.useMemo)(()=>e===a.LOADING,[e]);return(0,n.jsx)("div",{children:s?(0,n.jsx)(m,{}):(0,n.jsx)(S,{})})}var b=t(5297);function v(){let{getSearchUsers:e}=p(),[s,t]=(0,o.useState)(""),r=(0,b.useSearchParams)().get("token");return(0,o.useEffect)(()=>{r&&localStorage.setItem("token",r)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("input",{className:"grow input input-bordered",onChange:e=>{let{value:s}=e.target;t(s)}})}),(0,n.jsx)("button",{className:"btn btn-block mt-4",disabled:[void 0,null,""].includes(s),onClick:()=>e(s),children:"Search"})]})}function j(){return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(v,{})}),(0,n.jsx)(x,{})]})}}},function(e){e.O(0,[14,63,288,208,744],function(){return e(e.s=3659)}),_N_E=e.O()}]);